"0","fc_bldg_perc_damage <- readRDS(""fc_bldg_perc_damage.rds"")"
"0","rcp45 <- read_csv(""https://raw.githubusercontent.com/stanfordfuturebay/stanfordfuturebay.github.io/master/advanced/rcp45_sanfrancisco.csv"")"
"1","[1mRows: [22m[34m10[39m [1mColumns: [22m[34m10[39m
"
"1","[36mâ”€â”€[39m [1mColumn specification[22m [36mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[39m
[1mDelimiter:[22m "",""
[32mdbl[39m (10): SLR, 2020, 2030, 2040, 2050, 2060, 2070, 2080, 2090, 2100
"
"1","
[36mâ„¹[39m Use [38;5;251m[48;5;235m[38;5;251m[48;5;235m`spec()`[48;5;235m[38;5;251m[49m[39m to retrieve the full column specification for this data.
[36mâ„¹[39m Specify the column types or set [38;5;251m[48;5;235m[38;5;251m[48;5;235m`show_col_types = FALSE`[48;5;235m[38;5;251m[49m[39m to quiet this message.
"
"0","avg_sedan_cost <- 30281"
"0","perc_moved <- .60"
"0","perc_safe <- .30"
"0",""
"0","fc_bldg_damage <- "
"0","  fc_bldg_perc_damage %>% "
"0","  mutate(damage = avg_sedan_cost * perc_damage) %>% "
"0","  dplyr::select(osm_id, SLR, RP, damage) "
"0",""
"0",""
"0","fc_bldg_aal_by_slr <-"
"0","  fc_bldg_damage %>% "
"0","  pivot_wider("
"0","    names_from = RP,"
"0","    values_from = damage"
"0","  ) %>% "
"0","  replace(is.na(.), 0) %>% "
"0","  mutate("
"0","    damage = "
"0","      0.95*(`001`+`020`)/2 + "
"0","      0.04*(`020`+`100`)/2 + "
"0","      0.01*(`100`)"
"0","  ) %>% "
"0","  select(osm_id, SLR, damage)"
"0",""
"0",""
"0","fc_bldg_aal_by_year <- "
"0","  fc_bldg_aal_by_slr %>% "
"0","  left_join("
"0","    rcp45 %>% "
"0","      mutate("
"0","        SLR = str_pad(SLR, 3 , ""left"", ""0"")"
"0","      ) %>% "
"0","      select("
"0","        SLR,"
"0","        `2020`,"
"0","        `2030`,"
"0","        `2040`,"
"0","        `2050`"
"0","      )"
"0","  ) %>% "
"0","  pivot_longer("
"0","    `2020`:`2050`,"
"0","    names_to = ""year"","
"0","    values_to = ""occurrence"""
"0","  ) %>% "
"0","  pivot_longer("
"0","    c(damage,occurrence),"
"0","    names_to = ""key"","
"0","    values_to = ""value"""
"0","  ) %>% "
"0","  pivot_wider("
"0","    names_from = c(""key"",""SLR""),"
"0","    values_from = value"
"0","  ) %>% "
"0","  replace(is.na(.), 0) %>% "
"0","  mutate("
"0","    damage = "
"0","      occurrence_000 * (damage_000 + damage_025)/2 + "
"0","      occurrence_025 * (damage_025 + damage_050)/2 + "
"0","      occurrence_050 * (damage_050)"
"0","  ) %>% "
"0","  select(osm_id, year, damage)"
"1","Joining, by = ""SLR""
"
"0","fc_bldg_aal_by_year_map <-"
"0","  fc_bldg_aal_by_year %>% "
"0","  pivot_wider("
"0","    names_from = year,"
"0","    values_from = damage"
"0","  ) %>% "
"0","  mutate("
"0","    change = `2050`-`2020`"
"0","  ) %>% "
"0","  left_join("
"0","    fc_bldg_flooded_max %>%"
"0","      select(osm_id)"
"0","  ) %>% "
"0","  st_as_sf() %>% "
"0","  st_transform(4326)"
"1","Joining, by = ""osm_id""
"

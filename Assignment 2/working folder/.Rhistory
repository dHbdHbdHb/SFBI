setwd("~/Documents/GitHub/SFBI/Assignment 2/working folder")
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
library(tidytransit)
library(remotes)
library(sf)
library(censusapi)
library(tigris)
library(leaflet)
library(readxl)
library(mapboxapi)
library(mapview)
(tigris_use_cache = FALSE)
Sys.setenv(CENSUS_KEY="c8aa67e4086b4b5ce3a8717f59faa9a28f611dab")
pois <- st_read("/Volumes/GoogleDrive/Shared drives/SFBI/Data Library/OSM/gis_osm_pois_a_free_1.shp")
sf_neighborhoods <- read_csv("Analysis_Neighborhoods.csv") %>%
select(c(GEOID, NHOOD,TRACTCE10)
)
gtfs <- read_gtfs("https://gtfs.sfmta.com/transitdata/google_transit.zip")
sf_boundary <- counties("CA", cb =TRUE) %>%
filter(NAME %in% c("San Francisco", "San Mateo")) %>%
st_transform(st_crs(pois))
sf_pois_filter <- readRDS("sf_pois.rds")
access_raw_large <- readRDS("large_isochrone.rds") %>%
st_make_valid() %>%
st_join(sf_pois_filter) %>%    #this will put all the mapbox data together wooohoo
st_drop_geometry() %>%
filter(!is.na(osm_id))
saveRDS(access_raw_large, "access_raw_large.rds")
